!function(){function e(){var e,n;return"undefined"==typeof arguments[1]?(e=document,n=arguments[0]):(e=arguments[0],n=arguments[1]),document.querySelector?e.querySelector(n):n.indexOf("#")>=0?document.getElementById(n.slice(1)):n.indexOf(".")>=0?t(n.slice(1),e)[0]:e.getElementsByTagName(n)[0]}function t(e,t,n){if(!e)return[];t=t?"[object String]"===Object.prototype.toString.call(t)?document.getElementById(t):t:document.body,n=n||"*";for(var i,o,r,c=[],a=t.getElementsByTagName(n),d=0,s=a.length;d<s;d++){i=a[d],r=i.className.split(" ");for(var l=0,u=r.length;l<u;l++)if(o=r[l],o===e){c.push(i);break}}return c}function n(e,t){var n=e.style;for(var i in t)void 0!==typeof t[i]&&(n[i]=t[i])}function i(e,t,n,i,o){i=!!i;for(var r={add:["addEventListener","attachEvent"],remove:["removeEventListener","detachEvent"]},c=r[o][0],a=r[o][1],d=!!document[c],s=t.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" "),l=[].concat(e),u=0,p=l.length;u<p;u++)for(var h=l[u],f=0,g=s.length;f<g;f++)d?h[c](s[f],n,i):h[a]("on"+s[f],n)}function o(e,t,n,o){i(e,t,n,o,"add")}function r(e,t,n,o){i(e,t,n,o,"remove")}function c(e){var t=e||window.event;t.preventDefault?t.preventDefault():t.returnValue=!1}function a(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}function d(e){try{return Array.prototype.slice.call(e)}catch(o){for(var t=[],n=0,i=e.length;n<i;n++)t[n]=e[n];return t}}function s(){var e,t=(new Date).getTime(),n=Math.random();return e=Math.ceil(t*n)}function l(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return[e,t]}var u={isString:a("String"),isArray:Array.isArray||a("Array"),isFunction:a("Function"),isObject:a("Object"),returnArr:d},p={querySelector:e,byClass:t,addStyles:n},h={addEvent:o,removeEvent:r,preventDefault:c},f={random:s,getInner:l},g=function(e,t){var n=this;return!e&&u.isString(e)?void console.error("\u8bf7\u914d\u7f6e\u5206\u4eab\u7ec4\u4ef6\u7684\u7236\u5bb9\u5668 :)"):t&&"object"!=typeof t?void console.error("\u7b2c\u4e8c\u4e2a\u53c2\u6570\u8bf7\u8f93\u5165\u89c4\u5b9a\u5bf9\u8c61 :)"):(this.EL=p.querySelector(e),this.shareList=["qq","weibo","renren","qzone","weixin"],this.config={def:!!t&&(t.def||!1),url:t?t.url||window.location.href:window.location.href,wxurl:t?t.wxurl||t.url||window.location.href:window.location.href,title:t?t.title||document.title:document.title,summary:t?t.summary||"":"",desc:t?t.desc||"":"",img:t?t.img||"":"",flash:t?t.flash||"":"",site:t?t.site||"":"",appkey:t?t.appkey||"":"",security:t?t.security||"":""},void(this.config.def||(this.config.security&&"object"!=typeof QRCode?n._loadScript({url:"http://n.sinaimg.cn/finance/share_component/qrcode.min.js",success:function(){n._createOrder(n.config)}}):this._createOrder(this.config))))};g.prototype={constructor:g,_createHref:function(e){var t;switch(e){case"weibo":return t="http://service.weibo.com/share/share.php?url="+encodeURIComponent(this.config.url)+"&title="+encodeURIComponent(this.config.title)+"&pic="+encodeURIComponent(this.config.img);case"qzone":return t="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+encodeURIComponent(this.config.url)+"&title="+encodeURIComponent(this.config.title)+"&desc="+encodeURIComponent(this.config.desc)+"&summary="+encodeURIComponent(this.config.summary)+"&pics="+encodeURIComponent(this.config.img);case"weixin":return t="//comet.blog.sina.com.cn/qr?"+this.config.wxurl;case"qq":return t="http://connect.qq.com/widget/shareqq/index.html?url="+encodeURIComponent(this.config.url)+"&desc="+encodeURIComponent(this.config.desc)+"&title="+encodeURIComponent(this.config.title)+"&summary="+encodeURIComponent(this.config.summary)+"&pics="+encodeURIComponent(this.config.img)+"&flash="+encodeURIComponent(this.config.img)+"&site="+encodeURIComponent(this.config.site);case"renren":return t="http://widget.renren.com/dialog/share?resourceUrl="+encodeURIComponent(this.config.url)+"&srcUrl="+encodeURIComponent(this.config.url)+"&title="+encodeURIComponent(this.config.title)+"&description="+encodeURIComponent(this.config.desc)+"&images="+encodeURIComponent(this.config.img)}},_loadScript:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script"),i=e.success,o=e.url;n.src=o,n.type="text/javascript",n.charset="utf-8",t.appendChild(n),n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||i()}},_createOrder:function(e){for(var t,n=this,i=u.returnArr(n.EL.getElementsByTagName("a")),o=0;o<i.length;o++){if(""===i[o].getAttribute("data-share")||!i[o].getAttribute("data-share"))return void console.warn("\u5b58\u5728\u4e0d\u7b26\u5408\u8981\u6c42\u7684a\u6807\u7b7e");if(n.shareList.toString().indexOf(i[o].getAttribute("data-share"))===-1)return void console.warn("\u4e0d\u5b58\u5728\u5f53\u524dshare\u79cd\u7c7b");"weixin"!==i[o].getAttribute("data-share")?(i[o].setAttribute("href",n._createHref(i[o].getAttribute("data-share"))),i[o].setAttribute("target","_blank")):"https"===e.security?n._wxPopup(i[o]):(t=n._createHref("weixin"),n._wxPopup(i[o],t))}},_createdefault:function(){var e=this,t=document.createElement("div"),n="shareBox"+f.random(),i=n+"weibo",o=n+"qzone",r=n+"weixin";t.id=n;var c='<a href="'+e._createHref("weibo")+'" target="_blank" id="'+i+'" data-share="weibo" title="\u5206\u4eab\u5230\u65b0\u6d6a\u5fae\u535a"></a><a href="'+e._createHref("qzone")+'" target="_blank" id="'+o+'" data-share="qzone" title="\u5206\u4eab\u5230QQ\u7a7a\u95f4"></a><a href="" target="_blank" id="'+r+'" data-share="weixin" title="\u5206\u4eab\u5230\u5fae\u4fe1"></a>';t.innerHTML=c;var a=(document.getElementById(i),document.getElementById(o),document.getElementById(a));e.EL.appendChild(t)},_wxPopupStyle:function(e,t){var n,i=e.getElementsByTagName("p")[0],o=e.getElementsByTagName("img")[0]||"",r=f.getInner();n=navigator.userAgent.indexOf("MSIE 8.0")>0?"absolute":"fixed",p.addStyles(e,{zIndex:"100",backgroundColor:"#ffffff",display:"none",position:n,width:"250px",height:"280px",margin:"0",padding:"0",border:"5px solid #666666",top:parseInt(r[1])/2-143+"px",left:parseInt(r[0])/2-128+"px"}),o&&p.addStyles(o,{display:"block",width:"220px",height:"220px",margin:"0 auto",marginTop:"10px"}),p.addStyles(i,{margin:"0",padding:"0",textAlign:"center",background:"#f2f2f2",height:"40px",lineHeight:"40px",fontSize:"18px"}),p.addStyles(t,{padding:"0",margin:"0",backgroundImage:'url("//n.sinaimg.cn/finance/share_component/close.png")',width:"32px",height:"32px",display:"block",position:"absolute",top:"0px",right:"0px",cursor:"pointer"})},_wxPopupKey:!1,_wxisPop:!1,_wxPopup:function(e,t){var n,i=this,o="wxPopBox",r=o+"x",c=o+"imgBox",a="";a=t?'<p>\u626b\u4e00\u626b\u4e8c\u7ef4\u7801\u5206\u4eab</p><span id="'+r+'"></span><img src="'+t+'" alt="\u4e8c\u7ef4\u7801" width="160px"/>':'<p>\u626b\u4e00\u626b\u4e8c\u7ef4\u7801\u5206\u4eab</p><span id="'+r+'"></span><div id="'+c+'"></div>',h.addEvent(e,"click",function(e){function t(e){var t=document.createElement("div");return t.id="wxPopBox",t.className="weixin-popup",document.body.appendChild(t),t}h.preventDefault(e);var d;document.getElementById(o)?(n=document.getElementById(o),n.innerHTML=a):(n=t(o),n.innerHTML=a),d=document.getElementById(r),i._wxPopupStyle(n,d),n.style.display="block",document.getElementById(c)&&(new QRCode(document.getElementById(c),{text:i.config.wxurl,width:220,height:220,colorDark:"#000000",colorLight:"#ffffff"}),p.addStyles(document.getElementById(c),{width:"220px",height:"220px",marginTop:"10px",marginLeft:"auto",marginRight:"auto"})),h.addEvent(d,"click",function(){n.style.display="none",i._wxisPop=!1})})},weibo:function(e){window.open(this._createHref("weibo"),"_blank","height=400,width=600"),e&&"function"==typeof e&&e&&e()},qzone:function(e){window.open(this._createHref("qzone"),"_blank","height=400,width=600"),e&&"function"==typeof e&&e&&e()},weixin:function(e,t){var n=this;return e&&"function"==typeof e&&e&&e(),t?'<img src="http://comet.blog.sina.com.cn/qr?'+n._createHref("wechat")+'" alt="\u4e8c\u7ef4\u7801"/>':n._createHref("weixin")},qq:function(e){window.open(this._createHref("qq"),"_blank","height=400,width=600"),e&&"function"==typeof e&&e&&e()},renren:function(e){window.open(this._createHref("renren"),"_blank","height=400,width=600"),e&&"function"==typeof e&&e&&e()}},window.FnShare=function(e,t){return new g(e,t)}}();